<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="/css/output.css" />
  <title>Prouct Form</title>
</head>

<body>

  <header>

  </header>
  <main class="h-screen flex">
    <div class="max-w-[1200px] w-[1200px] p-5 max-h-auto my-auto mx-auto shadow-[0_35px_60px_-15px_rgba(0,0,0,0.5)]">
      <h3 class=" mx-auto my-10 text-4xl">
        Product Form
      </h3>
      <form class="w-full  mx-auto" method="POST" action="save" onsubmit="return validateForm()">
        <div class="w-full  mx-auto flex">
          <div class="flex flex-wrap w-1/2 justify-between mb-6">
            <div class="w-full md:w-1/2 px-3 mb-6 ABC">
              <label class="block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2" for="grid-first-name">
                Product Name
              </label>
              <input
                class="appearance-none block w-full bg-gray-200 text-gray-700 border border-gray-200 rounded py-3 px-4 mb-3 leading-tight focus:outline-none focus:bg-white"
                id="grid-first-name" type="text" name="product_name" placeholder="Mona Lisa Painting">
              <p class="text-red-500 text-xs italic hidden">Please fill out this field.</p>
            </div>
            <div class="w-full md:w-1/2 px-3 mb-6 ABC">
              <label class="block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2" for="grid-state">
                Product Type
              </label>
              <div class="relative">
                <select
                  class="block appearance-none w-full bg-gray-200 border border-gray-200 text-gray-700 py-3 px-4 pr-8 rounded leading-tight focus:outline-none focus:bg-white focus:border-gray-500"
                  id="grid-state" name="category_id">
                  <option value='0' > -- Select Category -- </option>
                  <% categories.forEach(item => {%>
                    <option value=<%= (item.id) %> > <%=item.category%> </option>
                  <%}) %>
                </select>
                <div class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700">
                  <svg class="fill-current h-4 w-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20">
                    <path d="M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z" />
                  </svg>
                </div>
              </div>
            </div>
            <div class="flex w-full  flex-wrap mx-3 mb-6">
              <div class="w-full">
                <label class="block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2" for="grid-password">
                  Description
                </label>
                <textarea
                  class=" resize-none appearance-none block w-full bg-gray-200 text-gray-700 border border-gray-200 rounded py-3 px-4 mb-3 leading-tight focus:outline-none focus:bg-white focus:border-gray-500"
                  id="grid-password" cols="45" rows="8" placeholder="Describe Your Product" name="description"></textarea>

              </div>
            </div>

            <div class="flex w-full items-end justify-between  mb-6">
              <div class="w-full px-3">
                <label class="block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2" for="grid-password">
                  Product Condition
                </label>
                <input
                  class=" appearance-none block w-full bg-gray-200 text-gray-700 border border-gray-200 rounded py-3 px-4 mb-3 leading-tight focus:outline-none focus:bg-white focus:border-gray-500"
                  id="grid-condition" placeholder="Your Product Condition" name="product_condition">

              </div>

            </div>
          </div>
          <div>
            <div class="w-full px-3 mb-6 ABC">
              <label class="block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2" for="grid-first-name">
                Upload Images
              </label>
              <input
                class="appearance-none block w-full bg-gray-200 text-gray-700 border border-gray-200 rounded py-3 px-4 mb-3 leading-tight focus:outline-none focus:bg-white"
                id="images" type="file" multiple name="product_images" placeholder="Mona Lisa Painting">
              <p class="text-red-500 text-xs italic hidden"></p>
            </div>
            <div id="preview" class="w-full mx-3 flex overflow-auto h-1/3 border-4 border-gray-300 px-3 mb-6 md:mb-6">
              <p class="my-auto text-gray-400">Preview</p>
            </div>
            <div class=" w-full mb-6 " id="specificaitons">
              <div class="flex px-3 justify-between">
                <label class="block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2" for="grid-first-name">
                  Specifications
                </label>
                <div class="flex">
                  <input onclick="addRow()" class="bg-gray-500 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded" type="button" value="+">
                  <input onclick="removeRow()" class="bg-gray-500 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded" type="button" value="-">
                </div>
              </div>
              <div class="w-full flex mb-6 ABC">
                <div class="px-3">
                  <input
                    class="appearance-none block w-full bg-gray-200 text-gray-700 border border-gray-200 rounded py-3 px-4 mb-3 leading-tight focus:outline-none focus:bg-white"
                     type="text" name="parameter_name[]" placeholder="specification name">
                  <p class="text-red-500 text-xs italic hidden"></p>
                </div>
                <div class="px-3">
                  <input
                    class="appearance-none block w-full bg-gray-200 text-gray-700 border border-gray-200 rounded py-3 px-4 mb-3 leading-tight focus:outline-none focus:bg-white"
                     type="text" name="parameter_value[]" placeholder="specificaiton value">
                  <p class="text-red-500 text-xs italic hidden"></p>
                </div>
              </div>
            </div>
          </div>

        </div>
        <div class="px-3 max-w-xl mx-auto">
          <input type="submit"
            class=" appearance-none block w-full border border-gray-200 rounded py-3 px-4 mb-3 leading-tight text-white bg-gray-500"
            value="Save Product" id="grid-submit">
        </div>
      </form>
    </div>

  </main>

  <script>

    //Function - validateForm() : validates form
    function validateForm(){
      let flag = true;



      return flag
    }

    //addRow
    function addRow(){
      const specificaitons = document.querySelector('#specificaitons');
      const clone = specificaitons.lastElementChild.cloneNode(true);
      specificaitons.appendChild(clone);
    }

    // Function removeRow() : removing specification row
    function removeRow(){
      const specificaitons = document.querySelector('#specificaitons');
      if(specificaitons.childNodes.length>=6)
      specificaitons.lastElementChild.remove();
    }

    // Image Preview
    const preview = document.getElementById('preview');
    const image = document.getElementById('images');

    image.addEventListener("change", function () {
      getImgData();
    });

    function getImgData() {
      const files = image.files;
      console.log(image.files)
      for(let i=0; i<files.length; i++){
        if (files[i]) {
          const fileReader = new FileReader();
          fileReader.readAsDataURL(files[i]);
          fileReader.addEventListener("load", function () {
            preview.style.display = "block";
            let ayush = ''  
            ayush = preview.innerHTML;
            preview.innerHTML = `${ayush} <img class='h-[200px] my-2' src="${this.result}" />`;
          });
        }
      }
    }

  </script>


</body>

</html>